!function(a){"use strict";function b(){this.deleteUserBtn=a("#deleteUser"),this.updateUserForm=a('form[name="updateUserForm"]'),this.usersTable=a("#listAllUsers tbody"),this.openUpdateForm=a(".userEdit"),this.init(),this.events()}a(document).ready(function(){new b}),b.prototype.init=function(){var b=this;this.usersTable.length&&(this.usersTable.empty(),a.ajax({url:"listAllUsers.php",type:"POST",success:function(c){var d=b,e=JSON.parse(c);a.each(e,function(a,b){d.usersTable.append('<tr><td class="readFirstName">'+b.firstName+'</td><td class="readLastName">'+b.lastName+'</td><td class="readEmail">'+b.email+'</td><td><span data-id="'+b.id+'" data-popup-open="editUserData" class="btn userEdit"><span>Edit</span></span><span data-id="'+b.id+'" data-popup-open="deleteUser" class="btn userDelete"><span>Delete</span></span></td></tr>')})},error:function(){console.log("problem with listing users")}}))},b.prototype.events=function(){var b=this;a(document).on(Browser.click(),this.deleteUserBtn.selector,function(){var c=b;a.ajax({url:"deleteUser.php",type:"POST",data:{userID:a(this).attr("data-user-id")},success:function(a){c.init()},error:function(){console.log("problem with deleting user")}})}),a(document).on(Browser.click(),this.openUpdateForm.selector,function(){a("#userID").val(a(this).attr("data-id")),a("#edit-first-name").val(a(this).closest("tr").find(".readFirstName").text()),a("#edit-last-name").val(a(this).closest("tr").find(".readLastName").text()),a("#edit-password").val(a(this).closest("tr").find(".readEmail").text())}),a(document).on("submit",this.updateUserForm.selector,function(c){c.preventDefault();var d=b;a.ajax({url:"updateUser.php",type:"POST",data:a(this).serialize(),success:function(b){a('[data-popup-close="editUserData"]').trigger("click"),d.init()},error:function(){console.log("problem with deleting user")}})})}}(jQuery);
//# sourceMappingURL=scripts.js.map